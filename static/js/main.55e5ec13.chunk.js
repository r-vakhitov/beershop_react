(this.webpackJsonptask_2=this.webpackJsonptask_2||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(0),i=n.n(s),a=n(12),r=n.n(a),o=n(5),d=(n(46),n(15)),b=n(4),u=(n(47),n(48),"/catalog"),j="/about";var l=function(){var e={color:"#FFFFFF",textDecoration:"none"};return Object(c.jsx)("div",{className:"nav-wrapper",children:Object(c.jsxs)("nav",{className:"nav",children:[Object(c.jsx)("h2",{children:"BeerShop"}),Object(c.jsxs)("ul",{className:"nav__list",children:[Object(c.jsx)(d.b,{style:e,to:"/",children:Object(c.jsx)("li",{children:"Home"})}),Object(c.jsx)(d.b,{style:e,to:u,children:Object(c.jsx)("li",{children:"Catalog"})}),Object(c.jsx)(d.b,{style:e,to:j,children:Object(c.jsx)("li",{children:"About"})})]})]})})},O=n(19),m=n(27),p=n.n(m),f=n(3),h=n(35),v=n(30),x="FETCH_CATALOG",y="SHOW_LOADER",I="HIDE_LOADER",k="ADD_ALL_TO_BASKET",g="REMOVE_ALL_FROM_BASKET",_="DRAG_ITEM",S="ADD_TO_BASKET",B="REMOVE_FROM_BASKET",N="ON_INPUT",E="FETCH_CLICK";n(51);var C=function(){return Object(c.jsx)("div",{className:"loadingio-spinner-bean-eater-6o1jck7o6s5",children:Object(c.jsxs)("div",{className:"ldio-7slxxstf83s",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})]})})},T=n(31),w=n(32),A=n(36),D=n(34);n(52);var F=function(e){var t=e.content,n=e.id,s=Object(o.d)((function(e){return e.catalog.items.columns})).inBasket,i=Object(o.c)(),a=!s.itemsIds.includes(n)?Object(c.jsx)("button",{id:n,onClick:function(e){var t;i((t=e.target.id,{type:S,payload:t}))},type:"button",className:"item__btn item__btn--basket"}):Object(c.jsx)("button",{id:n,onClick:function(e){var t;i((t=e.target.id,{type:B,payload:t}))},type:"button",className:"item__btn item__btn--rmv"});return Object(c.jsxs)("div",{className:"item",children:[Object(c.jsx)("span",{className:"item__name",children:t}),a]})},R=(n(53),function(e){Object(A.a)(n,e);var t=Object(D.a)(n);function n(e){var c;return Object(T.a)(this,n),(c=t.call(this,e)).myref=i.a.createRef(),c.state={numToShow:14},c.intersectionObserver=new IntersectionObserver((function(e){e[0].intersectionRatio>0&&c.setState({numToShow:c.state.numToShow+5})})),c}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.intersectionObserver.observe(this.myref.current)}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,s=t.byIds,i=this.props.renderButton();return Object(c.jsx)(O.c,{droppableId:this.props.id,children:function(t,a){return Object(c.jsxs)("div",{className:"items-container",children:[i,Object(c.jsxs)("ul",Object(f.a)(Object(f.a)({className:"items-container__list"},t.droppableProps),{},{ref:t.innerRef,style:{background:a.isDraggingOver?"lightblue":"lightgrey"},children:[n.slice(0,e.state.numToShow).map((function(e,t){return Object(c.jsx)(O.b,{draggableId:e,index:t,children:function(t,n){return Object(c.jsx)("li",Object(f.a)(Object(f.a)(Object(f.a)({className:"items-container__item",ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:Object(f.a)({backgroundColor:n.isDragging?"#72d7ff":"#d6efff"},t.draggableProps.style),children:Object(c.jsx)(F,{content:s[e].name,id:e})}))}},e)})),t.placeholder,Object(c.jsx)("div",{ref:e.myref})]}))]})}})}}]),n}(s.Component)),L=n(14);n(54);var H=Object(o.b)(null,(function(e){return{onInput:function(t){e(function(e){return{type:N,payload:e.trim()}}(t))}}}))((function(e){var t=e.onInput,n=Object(s.useState)(""),i=Object(L.a)(n,2),a=i[0],r=i[1],o=function(e,t){var n=Object(s.useState)(e),c=Object(L.a)(n,2),i=c[0],a=c[1];return Object(s.useEffect)((function(){var n=setTimeout((function(){a(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i}(a,300);return Object(s.useEffect)((function(){return t(o)}),[o,t]),Object(c.jsx)("input",{className:"search-input",type:"text",placeholder:"type to search",value:a,onChange:function(e){r(e.target.value)}})}));n(55),n(56);function M(){var e=Object(s.useState)(!1),t=Object(L.a)(e,2),n=t[0],i=t[1],a=Object(s.useRef)(),r=Object(s.useRef)(),d=[a,r],b=function(){i(d.some((function(e){return e.current.checked})))},u=Object(o.c)();return Object(c.jsxs)("div",{className:"preload",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"preload__question",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043d\u0430\u043f\u0438\u0442\u043a\u0430:"}),Object(c.jsxs)("div",{className:"preload__controls",children:[Object(c.jsx)("input",{className:"preload__input",id:"pivo",ref:a,onClick:b,name:"drink",type:"radio"}),Object(c.jsx)("label",{htmlFor:"pivo",children:"\u041f\u0438\u0432\u043e"}),Object(c.jsx)("input",{className:"preload__input",id:"beer",ref:r,onClick:b,name:"drink",type:"radio"}),Object(c.jsx)("label",{htmlFor:"beer",children:"Beer"})]})]}),Object(c.jsx)("button",{type:"button",disabled:!n,className:"preload__btn",onClick:function(){u(function(){var e=Object(v.a)(p.a.mark((function e(t){var n,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:y}),e.next=4,fetch("https://api.punkapi.com/v2/beers?per_page=80");case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,s=[],i={},c.forEach((function(e){var t=e.id,n=Object(h.a)(e,["id"]);s.push(t.toString()),i[t]=Object(f.a)({},n)})),t({type:x,payload:{columns:{inStock:{id:"inStock",itemsIds:s},inBasket:{id:"inBasket",itemsIds:[]}},byIds:i}}),t({type:I}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()),u({type:E})},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0430\u0442\u0430\u043b\u043e\u0433"})]})}var K=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.catalog.items})),n=t.columns,s=t.byIds,a=n.inStock,r=n.inBasket,d=Object(o.d)((function(e){return e.app.loading})),b=function(e){return!e.length},u=Object(o.d)((function(e){return e.button.clicked})),j=function(){var t;a.itemsIds.length&&e((t=a.itemsIds,{type:k,payload:t}))},l=function(){var t;r.itemsIds.length&&e((t=r.itemsIds,{type:g,payload:t}))};if(d)return Object(c.jsx)(C,{});if(!u)return Object(c.jsx)(M,{});return Object(c.jsxs)(i.a.Fragment,{children:[Object(c.jsx)(H,{}),Object(c.jsx)("div",{className:"catalog__list",children:Object(c.jsxs)(O.a,{onDragEnd:function(t){e(function(e){return{type:_,result:e}}(t))},children:[Object(c.jsx)(R,{items:a.itemsIds,byIds:s,id:a.id,renderButton:function(){return Object(c.jsx)("button",{type:"button",disabled:b(a.itemsIds),className:"catalog__control",onClick:j,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0441\u0435"})}}),Object(c.jsx)(R,{items:r.itemsIds,byIds:s,id:r.id,renderButton:function(){return Object(c.jsx)("button",{type:"button",disabled:b(r.itemsIds),className:"catalog__control",onClick:l,children:"\u0423\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435"})}})]})})]})};n(57);var P=function(){return Object(c.jsx)("div",{className:"catalog",children:Object(c.jsx)(K,{})})};var G=function(){return Object(c.jsx)("h2",{children:"Welcome to the BeerShop!"})};var J=function(){return Object(c.jsx)("h2",{children:"Here you can find info about our company!"})};var V=function(){return Object(c.jsxs)(d.a,{children:[Object(c.jsx)(l,{}),Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(b.c,{children:[Object(c.jsx)(b.a,{path:"/",exact:!0,component:G}),Object(c.jsx)(b.a,{path:u,component:P}),Object(c.jsx)(b.a,{path:j,component:J})]})})]})},W=n(10),q=n(33),U={loading:!1},z=n(16),Q=n(8),X={items:{columns:{inStock:{id:"inStock",itemsIds:[]},inBasket:{id:"inBasket",itemsIds:[]}},byIds:{}}},Y=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{items:t.payload})},Z=function(e,t){var n,c=t.result,s=c.destination,i=c.source,a=c.draggableId;if(!s)return e;if(s.droppableId===i.droppableId&&s.index===i.index)return e;var r=e.items.columns[i.droppableId],o=e.items.columns[s.droppableId];if(r===o){var d=Object(Q.a)(r.itemsIds);d.splice(i.index,1),d.splice(s.index,0,a);var b=Object(f.a)(Object(f.a)({},r),{},{itemsIds:d});return Object(f.a)(Object(f.a)({},e),{},{items:{columns:Object(f.a)(Object(f.a)({},e.items.columns),{},Object(z.a)({},b.id,b)),byIds:Object(f.a)({},e.items.byIds)}})}var u=Object(Q.a)(r.itemsIds);u.splice(i.index,1);var j=Object(f.a)(Object(f.a)({},r),{},{itemsIds:u}),l=Object(Q.a)(o.itemsIds);l.splice(s.index,0,a);var O=Object(f.a)(Object(f.a)({},o),{},{itemsIds:l});return Object(f.a)(Object(f.a)({},e),{},{items:{columns:Object(f.a)(Object(f.a)({},e.items.columns),{},(n={},Object(z.a)(n,j.id,j),Object(z.a)(n,O.id,O),n)),byIds:Object(f.a)({},e.items.byIds)}})},$=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{items:Object(f.a)(Object(f.a)({},e.items),{},{columns:{inStock:{id:"inStock",itemsIds:[]},inBasket:{id:"inBasket",itemsIds:[].concat(Object(Q.a)(e.items.columns.inBasket.itemsIds),Object(Q.a)(t.payload))}}})})},ee=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{items:{byIds:Object(f.a)({},e.items.byIds),columns:{inStock:{id:"inStock",itemsIds:[].concat(Object(Q.a)(t.payload),Object(Q.a)(e.items.columns.inStock.itemsIds))},inBasket:{id:"inBasket",itemsIds:[]}}}})},te=function(e,t){var n=e.items.columns.inStock.itemsIds.indexOf(t.payload);return Object(f.a)(Object(f.a)({},e),{},{items:{byIds:Object(f.a)({},e.items.byIds),columns:{inStock:{id:"inStock",itemsIds:[].concat(Object(Q.a)(e.items.columns.inStock.itemsIds.slice(0,n)),Object(Q.a)(e.items.columns.inStock.itemsIds.slice(n+1)))},inBasket:{id:"inBasket",itemsIds:[].concat(Object(Q.a)(e.items.columns.inBasket.itemsIds),[t.payload])}}}})},ne=function(e,t){var n=e.items.columns.inBasket.itemsIds.indexOf(t.payload);return Object(f.a)(Object(f.a)({},e),{},{items:{byIds:Object(f.a)({},e.items.byIds),columns:{inStock:{id:"inStock",itemsIds:[t.payload].concat(Object(Q.a)(e.items.columns.inStock.itemsIds))},inBasket:{id:"inBasket",itemsIds:[].concat(Object(Q.a)(e.items.columns.inBasket.itemsIds.slice(0,n)),Object(Q.a)(e.items.columns.inBasket.itemsIds.slice(n+1)))}}}})},ce=function(e,t){var n=t.payload?t.payload:"";return Object(f.a)(Object(f.a)({},e),{},{items:Object(f.a)(Object(f.a)({},e.items),{},{columns:Object(f.a)(Object(f.a)({},e.items.columns),{},{inStock:{id:"inStock",itemsIds:Object(Q.a)(Object.keys(e.items.byIds).filter((function(t){return e.items.byIds[t].name.toLowerCase().indexOf(n.toLowerCase())>-1&&-1===e.items.columns.inBasket.itemsIds.indexOf(t)})))}})})})},se={clicked:!1},ie=Object(W.c)({catalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Y(e,t);case _:return Z(e,t);case k:return $(e,t);case g:return ee(e,t);case S:return te(e,t);case B:return ne(e,t);case N:return ce(e,t);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case I:return Object(f.a)(Object(f.a)({},e),{},{loading:!1});default:return e}},button:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(f.a)(Object(f.a)({},e),{},{clicked:!0});default:return e}}}),ae=Object(W.e)(ie,Object(W.d)(Object(W.a)(q.a))),re=Object(c.jsx)(o.a,{store:ae,children:Object(c.jsx)(V,{})});r.a.render(re,document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.55e5ec13.chunk.js.map